const os = require("os")
const {runtime} = require('../lib/functions')
cmd({
      pattern: "menu",
      alias: ["panel"],
      desc: "Get Bot Menu",
      category: "main",
      react: "ğŸ“",
      filename: __filename
},
    
    async(conn, mek, m,{from, quoted, body, isCmd, command, args, q, isGroup, sender, senderNumber, botNumber2, botNumber, pushname, isMe, isOwner, groupMetadata, groupName, participants, groupAdmins, isBotAdmins, isAdmins, reply}) => {
try{
    
let menu = {
main: '',
download: '',
movie: '',
group: '',
owner: '',
convert: '',
news: '',
ai: '',
tools: '',
search: '',
fun: '',
voice: '',
other: ''
};

for (let i = 0; i < commands.length; i++) {
if (commands[i].pattern && !commands[i].dontAddCommandList) {
menu[commands[i].category] += `.${commands[i].pattern}\n`;
 }
}
   
          const senderNumber = m.sender;
          const isGroup = m.isGroup || false;

          // Check access permissions
          if (!checkAccess(senderNumber, isGroup)) {
              if (blacklistedJIDs.includes(senderNumber)) {
                  return reply("*ğŸš« You are blacklisted. Access denied.*");
              } else {
                  return reply("*ğŸ˜¢ Access denied. You don't have permission to use this command.ğŸ Change Bot Mode!*");
              }
          }

          // System and memory information
          const uptime = runtime(process.uptime());
          const memoryUsage = (process.memoryUsage().heapUsed / 1024 / 1024).toFixed(2);
          const totalMemory = Math.round(os.totalmem() / 1024 / 1024);
          const cpuArch = os.arch();
          const cpuCores = os.cpus().length;
          const systemType = os.type();
          const freeMemory = (os.freemem() / 1024 / 1024).toFixed(2);

          // Custom message for Render platform
          let platformMessage = '';
          if (platformName === 'Render') {
              platformMessage = '\nğŸŒŸ You are currently hosting on Render! Enjoy seamless deployments.';
          }

          // Status message to be sent


          let desc = `*ğŸ‘‹ Hello ${pushname}*

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ“¥ *ğƒğ¨ğ°ğ§ğ¥ğ¨ğšğ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.download}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ‘¾ *ğ€ğ¢ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.ai}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ”§ *ğŒğšğ¢ğ§ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.main}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ‰ *ğ…ğ®ğ§ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.fun}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ”„ *ğ‚ğ¨ğ§ğ¯ğğ«ğ­ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.convert}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ” *ğ’ğğšğ«ğœğ¡ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.search}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ‘¥ *ğ†ğ«ğ¨ğ®ğ© ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.group}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ”’ *ğğ°ğ§ğğ« ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.owner}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 âš™ï¸ *ğğ­ğ¡ğğ« ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.other}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ› ï¸ *ğ“ğ¨ğ¨ğ¥ğ¬ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.tools}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º
 ğŸ“° *ğğğ°ğ¬ ğŒğğ§ğ®*
  â”€â”€â”€â”€â”€â”€â”€
 ${menu.news}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º

> ğ—•ğ—¨ğ—¡ğ—§ğ—¬-ğ— ğ—— ğŸ¥·ğŸ’—`





          // Sending the image with caption
          const sentMsg = await conn.sendMessage(from, {


          text: desc,
          contextInfo: {

          forwardingScore: 999,
          isForwarded: true,
          forwardedNewsletterMessageInfo: {
          newsletterName: 'BUNTY-MD ğŸ’—ğŸ¥·',
          newsletterJid: "120363337636017852@newsletter",
          },
          externalAdReply: {
              title: `BUNTY-MD Menu List`,
              body: `Can't Find The Information. You Can Try Another Way. Error Code 4043`,
              thumbnailUrl: `https://unitedcamps.in/Images/file_5538.jpg`,
              sourceUrl: ``,
              mediaType: 1,
              renderLargerThumbnail: true
              }
                  }
              }, { quoted: mek });

      } catch (e) {
          console.error(e);
          reply(`*Error:* ${e.message}`);
      }
    });
